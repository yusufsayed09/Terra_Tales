<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Terra Toons ‚Äî Interactive Spinning Earth</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap');

  body {
    margin: 0;
    overflow: hidden;
    background: black;
    font-family: 'Inter', sans-serif;
    color: #e5edf8;
    letter-spacing: 0.3px;
  }

  canvas { display: block; }

  header {
    position: absolute;
    top: 20px;
    left: 30px;
    z-index: 20;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .logo .dot {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: linear-gradient(135deg, #2ec4b6, #0066ff);
    box-shadow: 0 6px 18px rgba(0,0,0,.6),
                inset 0 -6px 18px rgba(255,255,255,.05);
  }

  .logo .title {
    font-weight: 700;
    font-size: 22px;
    color: #f3f7ff;
    text-shadow: 0 0 6px rgba(255,255,255,0.3);
  }

  .logo .subtitle {
    font-size: 13px;
    font-weight: 400;
    color: #b9c5d8;
  }

  .text-box {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.4);
    border-radius: 14px;
    padding: 14px 28px;
    text-align: center;
    z-index: 15;
    max-width: 800px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.45);
    backdrop-filter: blur(6px);
  }

  .tagline-box {
    top: 40px;
    font-size: 20px;
    font-weight: 500;
    color: #e1ebfa;
    text-shadow: 0 0 10px rgba(255,255,255,0.25);
  }

  .title-box {
    top: 50%;
    transform: translate(-50%, -50%);
    font-size: 36px;
    font-weight: 700;
    color: #f3f7ff;
    text-shadow: 0 0 12px rgba(255,255,255,0.3);
    line-height: 1.4;
  }

  .info-blocks {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 18px;
    width: 90%;
    max-width: 1000px;
  }

  .info-blocks .block {
    background: rgb(255 255 255 / 48%);
    border-radius: 14px;
    padding: 22px;
    text-align: center;
    font-size: 15px;
    font-weight: 500;
    color: #dee7f5;
    min-height: 100px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.5);
    transition: 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Inter', sans-serif;
    white-space: nowrap;
  }

  .info-blocks .block:hover {
    background: rgba(255,255,255,0.12);
    transform: translateY(-6px) scale(1.03);
    box-shadow: 0 10px 35px rgba(0,0,0,0.6);
  }

  @media (max-width: 900px) {
    .title-box { font-size: 28px; }
    .tagline-box { font-size: 18px; }
  }

  @media (max-width: 700px) {
    .info-blocks { grid-template-columns: 1fr 1fr; }
  }

  @media (max-width: 500px) {
    .info-blocks { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<header>
  <div class="logo">
    <div class="dot"></div>
    <div>
      <div class="title">Terra Tales</div>
      <div class="subtitle">Explore. Animate. Enjoy.</div>
    </div>
  </div>
</header>

<div class="text-box tagline-box">
  A visual journey of our changing planet ‚Äî from forests to ice, heat to skies.
</div>

<div class="text-box title-box">
  ‚Äú25 Years of Earth through Terra‚Äôs Eyes‚Äù
</div>

<canvas id="earthCanvas"></canvas>

<section class="info-blocks">

  <div class="block"><a href="{{ url_for('about_page') }}">"Melting Arctic sea ice ‚ùÑÔ∏è"</a></div>
  <div class="block"><a href="{{ url_for('air_page') }}">"Atmospheric Composition üå™"</a></div>
    <div class="block"><a href="{{ url_for('cropland_page') }}">"Global croplandsüå≥"</a></div>
    <div class="block"><a href="{{ url_for('why_page') }}">"Why Us!"</a></div>

</section>

<script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
<script>
// === THREE.JS SCENE ===
const canvas = document.getElementById("earthCanvas");
const renderer = new THREE.WebGLRenderer({ canvas, antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.z = 3;

scene.add(new THREE.AmbientLight(0x666666));
const light = new THREE.PointLight(0xffffff, 1.3);
light.position.set(5, 3, 5);
scene.add(light);

const textureLoader = new THREE.TextureLoader();
const earth = new THREE.Mesh(
  new THREE.SphereGeometry(1, 64, 64),
  new THREE.MeshPhongMaterial({
    map: textureLoader.load("https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/earthmap1k.jpg"),
    emissiveMap: textureLoader.load("https://threejs.org/examples/textures/planets/earth_lights_2048.png"),
    emissive: new THREE.Color(0x2222ff),
    emissiveIntensity: 1.5
  })
);
scene.add(earth);

const clouds = new THREE.Mesh(
  new THREE.SphereGeometry(1.01, 64, 64),
  new THREE.MeshPhongMaterial({
    map: textureLoader.load("https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/earthcloudmaptrans.jpg"),
    transparent: true,
    opacity: 0.5
  })
);
scene.add(clouds);

const atmosphere = new THREE.Mesh(
  new THREE.SphereGeometry(1.05, 64, 64),
  new THREE.MeshBasicMaterial({ color: 0x00aaff, side: THREE.BackSide, transparent: true, opacity: 0.25 })
);
scene.add(atmosphere);

// Twinkling stars
const starGroup = new THREE.Group();
for (let i = 0; i < 1200; i++) {
  const mat = new THREE.SpriteMaterial({
    map: new THREE.CanvasTexture((() => {
      const c = document.createElement('canvas');
      c.width = 32; c.height = 32;
      const g = c.getContext('2d');
      const grad = g.createRadialGradient(16,16,0,16,16,16);
      grad.addColorStop(0,'rgba(255,255,255,1)');
      grad.addColorStop(1,'rgba(255,255,255,0)');
      g.fillStyle = grad; g.fillRect(0,0,32,32);
      return c;
    })() ),
    transparent:true,
    opacity: Math.random() * 0.8 + 0.5
  });
  const s = new THREE.Sprite(mat);
  s.position.set((Math.random()-0.5)*200,(Math.random()-0.5)*200,(Math.random()-0.5)*200);
  const sc = Math.random()*0.6+0.2;
  s.scale.set(sc,sc,1);
  s.userData.delta = (Math.random()*0.02+0.005)*(Math.random()>0.5?1:-1);
  starGroup.add(s);
}
scene.add(starGroup);

// Animation
function animate(){
  requestAnimationFrame(animate);
  earth.rotation.y += 0.0025;
  clouds.rotation.y += 0.003;
  starGroup.children.forEach(s=>{
    s.material.opacity += s.userData.delta;
    if(s.material.opacity>1 || s.material.opacity<0.5) s.userData.delta *= -1;
  });
  renderer.render(scene,camera);
}
animate();

window.addEventListener("resize", ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// === SPACE ROTATION SOUND ===
function createSpaceSound() {
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  const lfo = ctx.createOscillator();

  osc.type = "sine";
  osc.frequency.value = 50;
  lfo.frequency.value = 0.15;
  gain.gain.value = 0.1;

  const lfoGain = ctx.createGain();
  lfoGain.gain.value = 0.05;
  lfo.connect(lfoGain);
  lfoGain.connect(gain.gain);

  osc.connect(gain);
  gain.connect(ctx.destination);
  osc.start();
  lfo.start();
}

document.body.addEventListener("click", () => {
  createSpaceSound();
}, { once: true });
</script>
</body>
</html>
